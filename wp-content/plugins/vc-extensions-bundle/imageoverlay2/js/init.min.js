jQuery(document).ready(function(a){function b(a){var b=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;a=a.replace(b,function(a,b,c,d){return b+b+c+c+d+d});var c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return c?{r:parseInt(c[1],16),g:parseInt(c[2],16),b:parseInt(c[3],16)}:null}a(".cq-imageoverlay2-container").each(function(c){var e,d=a(this),e=a(this).data("overlaycolor"),i=(a(this).data("overlaysize"),a(this).data("overlayshape"),a(this).data("overlaymargin"),parseInt(a(this).data("elementheight"))),j=a(this).data("titlesize"),k=a(this).data("contentsize"),l=a(this).data("contentcolor"),m=a(this).data("elementmargin"),j=a(this).data("titlesize"),k=a(this).data("contentsize"),o=(a(this).data("image"),a(this).data("overlaystyle"));"customized"!=o?(e=b(a(this).data("overlaycolor")),e&&(e="rgba("+e.r+", "+e.g+", "+e.b+", 0.7)")):e=a(this).data("overlaycolor");var p=a(this).find(".cq-imageoverlay2-background"),q=Math.max(a(this).width(),a(this).height());""!=l&&a(this).find(".cq-imageoverlay2-title, cq-imageoverlay2-icon, .cq-imageoverlay2-content").css("color",l),""!=i&&a(this).css({height:i}),""!=j&&a(this).find(".cq-imageoverlay2-title, cq-imageoverlay2-icon").css({"font-size":j}),""!=k&&a(this).find(".cq-imageoverlay2-content").css({"font-size":k});var r,s;r=a(this).width(),s=a(this).height();a(".cq-imageoverlay2-img",d);a(this).find(".cq-imageoverlay2").css({height:d.height()});var t=a(".cq-imageoverlay2-img",d)[0];a("<img/>").attr("src",a(t).attr("src")).load(function(){a(window).trigger("resize")}),a(this).find(".cq-imageoverlay2-background").css({"background-color":e}),p.css({width:4*q,height:4*q});var u;a(window).on("resize",function(a){q=Math.max(d.width(),d.height()),p.css({width:4*q,height:4*q}),u=d.find("img").height(),u>0&&d.css("max-height",u)}),""!=m&&a(this).css("margin",m)})});