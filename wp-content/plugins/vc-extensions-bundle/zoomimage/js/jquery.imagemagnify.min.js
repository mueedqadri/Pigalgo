!function(a,b){"use strict";var d={radius:100,borderSize:12,moveBy:"press",x:0,y:0},e=function(b,c){this.element=b,this.options=a.extend(d,c),this.init()};e.prototype.init=function(){var c=this,d=this.element.data("largeimage"),e=!1,f=(this.element.data("moveby")||c.options.moveBy).toLowerCase(),g=this.element.data("bordersize")||c.options.borderSize,h=this.element.data("radius")||c.options.radius,i=void 0;d||(d=this.element[0].src),this.container=a("<div>").addClass("cq-magnify").insertAfter(this.element),this.element.detach().appendTo(this.container),this.glassElement=a("<div>").addClass("cq-magnify-glass").css({"background-image":"url("+d+")",width:2*h,height:2*h}).appendTo(this.container),this.largeImage=new Image,this.largeImage.src=d,a(this.largeImage).on("load",function(){if(c.ratioX=c.container.innerWidth()/c.largeImage.width,c.ratioY=c.container.innerHeight()/c.largeImage.height,"press"==f||"none"==f){var j=c.element.data("x")||c.options.x,k=c.element.data("y")||c.options.y,l=j-h-g,m=k-h-g,n=-1*((j-c.container.innerWidth())/c.ratioX)-c.largeImage.width+h,o=-1*((k-c.container.innerHeight())/c.ratioY)-c.largeImage.height+h;c.glassElement.css({top:m,left:l,"background-position":n+"px "+o+"px"}).show().addClass("cq-dropin0 cq-dropInDown")}a(b).width()<=320&&(j>0||k>0)&&c.glassElement.hide(),c.container.on("touchstart",function(){c.glassElement.show()}),c.container.on("touchmove",function(a){var b=a.originalEvent.touches[0]||a.originalEvent.changedTouches[0],d=c.container.offset(),e=b.pageX-d.left,f=b.pageY-d.top,i=e-h-g,j=f-h-g,k=-1*((e-c.container.innerWidth())/c.ratioX)-c.largeImage.width+h,l=-1*((f-c.container.innerHeight())/c.ratioY)-c.largeImage.height+h;return c.glassElement.css({top:j,left:i,"background-position":k+"px "+l+"px"}),(b.pageX<d.left||b.pageY<d.top||e>c.container.innerWidth()||f>c.container.innerHeight())&&c.glassElement.hide(),!1}),c.container.on("touchend",function(){return!1}),c.container.on("mouseenter",function(){"none"!=f&&c.glassElement.show().addClass("drag")}),c.container.on("mousedown",function(){e=!0,"none"!=f&&c.glassElement.removeClass("drag").addClass("dragging")}),c.container.on("mouseup",function(){e=!1,"none"!=f&&c.glassElement.removeClass("dragging").addClass("drag")}),c.container.on("mousemove",function(a){var b=c.container.offset(),i=a.pageX-b.left,j=a.pageY-b.top,k=i-h-g,l=j-h-g,m=-1*((i-c.container.innerWidth())/c.ratioX)-c.largeImage.width+h,n=-1*((j-c.container.innerHeight())/c.ratioY)-c.largeImage.height+h;"press"==f?e&&c.glassElement.css({"background-image":"url("+d+")",top:l,left:k,"background-position":m+"px "+n+"px"}):"hover"==f&&c.glassElement.css({"background-image":"url("+d+")",top:l,left:k,"background-position":m+"px "+n+"px"}).addClass("hidecursor"),(a.pageX<b.left||a.pageY<b.top||i>c.container.innerWidth()||j>c.container.innerHeight())&&c.glassElement.hide()}),a(b).on("resize",function(){"undefined"==typeof i&&(i=setTimeout(function(){c.ratioX=c.container.innerWidth()/c.largeImage.width,c.ratioY=c.container.innerHeight()/c.largeImage.height,i=void 0},200))}),a(b).trigger("resize")})},a.fn.cq_magnify=function(b){return this.each(function(){a.data(this,"cq-magnify")||a.data(this,"cq-magnify",new e(a(this),b))})}}(jQuery,window,document),jQuery(document).ready(function(a){a(".cq-magnify-image").each(function(){var c=a(this).data("radius"),d=a(this).data("bordersize"),e=a(this).data("bordercolor"),f=a(this).data("width"),g=a(this).data("filter"),h=a(this).data("glassfilter");a(this).data("imagefilter");var j=a(this).data("pluginurl");a(this).parent(".cq-magnify").css("width",f),a(this).css({width:f}).animate({opacity:1},300).cq_magnify({radius:c,x:a(this).data("x"),y:a(this).data("y")}),"blur"==g?a(this).css({"-webkit-filter":"blur(2px)","-moz-filter":"blur(2px)","-ms-filter":"blur(2px)","-o-filter":"blur(2px)",filter:"url("+j+"/css/blur.svg#blur)"}):"gray"==g&&a(this).css({"-webkit-filter":"grayscale(100%)","-moz-filter":"grayscale(100%)","-ms-filter":"grayscale(100%)","-o-filter":"grayscale(100%)",filter:"url("+j+"/css/gray.svg#grayscale)"}),a(this).parent().find(".cq-magnify-glass").css({width:2*c,height:2*c,"-webkit-border-radius":2*c,"-moz-border-radius":2*c,"border-radius":2*c,"border-width":d+"px","border-color":e,"-webkit-filter":h,"-moz-filter":h,filter:h})})});