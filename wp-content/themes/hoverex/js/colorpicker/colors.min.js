(function(a,b){if(typeof exports==="object"){module.exports=b(a)}else{if(typeof define==="function"&&define.amd){define("colors",[],function(){return b(a)})}else{a.Colors=b(a)}}}(this,function(j,h){var o={rgb:{r:[0,255],g:[0,255],b:[0,255]},hsv:{h:[0,360],s:[0,100],v:[0,100]},hsl:{h:[0,360],s:[0,100],l:[0,100]},alpha:{alpha:[0,1]},HEX:{HEX:[0,16777215]}},a=j.Math,l=a.round,b={},q={},f={r:0.298954,g:0.586434,b:0.114612},u={r:0.2126,g:0.7152,b:0.0722},s=function(w){this.colors={RND:{}};this.options={color:"rgba(0,0,0,0)",grey:f,luminance:u,valueRanges:o};p(this,w||{})},p=function(A,y){var B,w=A.options,x;r(A);for(var z in y){if(y[z]!==h){w[z]=y[z]}}x=w.customBG;w.customBG=(typeof x==="string")?g.txt2color(x).rgb:x;q=e(A.colors,w.color,h,true)},r=function(w){if(b!==w){b=w;q=w.colors}};s.prototype.setColor=function(y,w,x){r(this);if(y){return e(this.colors,y,w,h,x)}else{if(x!==h){this.colors.alpha=m(x,0,1)}return t(w)}};s.prototype.setCustomBackground=function(w){r(this);this.options.customBG=(typeof w==="string")?g.txt2color(w).rgb:w;return e(this.colors,h,"rgb")};s.prototype.saveAsBackground=function(){r(this);return e(this.colors,h,"rgb",true)};s.prototype.toString=function(x,w){return g.color2text((x||"rgb").toLowerCase(),this.colors,w)};function e(w,x,y,z,A){if(typeof x==="string"){var x=g.txt2color(x);y=x.type;q[y]=x[y];A=A!==h?A:x.alpha}else{if(x){for(var B in x){w[y][B]=m(x[B]/o[y][B][1],0,1)}}}if(A!==h){w.alpha=m(+A,0,1)}return t(y,z?w:h)}function c(w,y,A){var z=b.options.grey,x={};x.RGB={r:w.r,g:w.g,b:w.b};x.rgb={r:y.r,g:y.g,b:y.b};x.alpha=A;x.equivalentGrey=l(z.r*w.r+z.g*w.g+z.b*w.b);x.rgbaMixBlack=v(y,{r:0,g:0,b:0},A,1);x.rgbaMixWhite=v(y,{r:1,g:1,b:1},A,1);x.rgbaMixBlack.luminance=d(x.rgbaMixBlack,true);x.rgbaMixWhite.luminance=d(x.rgbaMixWhite,true);if(b.options.customBG){x.rgbaMixCustom=v(y,b.options.customBG,A,1);x.rgbaMixCustom.luminance=d(x.rgbaMixCustom,true);b.options.customBG.luminance=d(b.options.customBG,true)}return x}function t(D,H){var J=H||q,I=g,C=b.options,B=o,L=J.RND,x,M="",O="",S={hsl:"hsv",rgb:D},z=L.rgb,y,Q;if(D!=="alpha"){for(var V in B){if(!B[V][V]){if(D!==V){O=S[V]||"rgb";J[V]=I[O+"2"+V](J[O])}if(!L[V]){L[V]={}}x=J[V];for(M in x){L[V][M]=l(x[M]*B[V][M][1])}}}z=L.rgb;J.HEX=I.RGB2HEX(z);J.equivalentGrey=C.grey.r*J.rgb.r+C.grey.g*J.rgb.g+C.grey.b*J.rgb.b;J.webSave=y=k(z,51);J.webSmart=Q=k(z,17);J.saveColor=z.r===y.r&&z.g===y.g&&z.b===y.b?"web save":z.r===Q.r&&z.g===Q.g&&z.b===Q.b?"web smart":"";J.hueRGB=g.hue2RGB(J.hsv.h);if(H){J.background=c(z,J.rgb,J.alpha)}}var w=J.rgb,F=J.alpha,U="luminance",R=J.background,K,A,G,P,T,N,E;K=v(w,{r:0,g:0,b:0},F,1);K[U]=d(K,true);J.rgbaMixBlack=K;A=v(w,{r:1,g:1,b:1},F,1);A[U]=d(A,true);J.rgbaMixWhite=A;if(C.customBG){E=v(w,R.rgbaMixCustom,F,1);E[U]=d(E,true);E.WCAG2Ratio=n(E[U],R.rgbaMixCustom[U]);J.rgbaMixBGMixCustom=E;E.luminanceDelta=a.abs(E[U]-R.rgbaMixCustom[U]);E.hueDelta=i(R.rgbaMixCustom,E,true)}J.RGBLuminance=d(z);J.HUELuminance=d(J.hueRGB);if(C.convertCallback){C.convertCallback(J,D)}return J}var g={txt2color:function(x){var z={},B=x.replace(/(?:#|\)|%)/g,"").split("("),y=(B[1]||"").split(/,\s*/),A=B[1]?B[0].substr(0,3):"rgb",w="";z.type=A;z[A]={};if(B[1]){for(var C=3;C--;){w=A[C]||A.charAt(C);z[A][w]=+y[C]/o[A][w][1]}}else{z.rgb=g.HEX2rgb(B[0])}z.alpha=y[3]?+y[3]:1;return z},color2text:function(B,w,C){var A=C!==false&&l(w.alpha*100)/100,E=typeof A==="number"&&C!==false&&(C||A!==1),z=w.RND.rgb,D=w.RND.hsl,x=B==="hex"&&E,y=B==="hex"&&!x,G=B==="rgb"||x,F=G?z.r+", "+z.g+", "+z.b:!y?D.h+", "+D.s+"%, "+D.l+"%":"#"+w.HEX;return y?F:(x?"rgb":B)+(E?"a":"")+"("+F+(E?", "+A:"")+")"},RGB2HEX:function(w){return((w.r<16?"0":"")+w.r.toString(16)+(w.g<16?"0":"")+w.g.toString(16)+(w.b<16?"0":"")+w.b.toString(16)).toUpperCase()},HEX2rgb:function(w){w=w.split("");return{r:+("0x"+w[0]+w[w[3]?1:0])/255,g:+("0x"+w[w[3]?2:1]+(w[3]||w[1]))/255,b:+("0x"+(w[4]||w[2])+(w[5]||w[2]))/255}},hue2RGB:function(w){var z=w*6,y=~~z%6,x=z===6?0:(z-y);return{r:l([1,1-x,0,0,x,1][y]*255),g:l([x,1,1,1-x,0,0][y]*255),b:l([0,0,x,1,1,1-x][y]*255)}},rgb2hsv:function(y){var D=y.r,C=y.g,w=y.b,x=0,A,z,B;if(C<w){C=w+(w=C,0);x=-1}z=w;if(D<C){D=C+(C=D,0);x=-2/6-x;z=a.min(C,w)}A=D-z;B=D?(A/D):0;return{h:B<1e-15?((q&&q.hsl&&q.hsl.h)||0):A?a.abs(x+(C-w)/(6*A)):0,s:D?(A/D):((q&&q.hsv&&q.hsv.s)||0),v:D}},hsv2rgb:function(A){var z=A.h*6,F=A.s,D=A.v,y=~~z,B=z-y,x=D*(1-F),w=D*(1-B*F),E=D*(1-(1-B)*F),C=y%6;return{r:[D,w,x,x,E,D][C],g:[E,D,D,w,x,x][C],b:[x,x,E,D,D,w][C]}},hsv2hsl:function(x){var w=(2-x.s)*x.v,y=x.s*x.v;y=!x.s?0:w<1?(w?y/w:0):y/(2-w);return{h:x.h,s:!x.v&&!y?((q&&q.hsl&&q.hsl.s)||0):y,l:w/2}},rgb2hsl:function(x,y){var w=g.rgb2hsv(x);return g.hsv2hsl(y?w:(q.hsv=w))},hsl2rgb:function(F){var B=F.h*6,I=F.s,z=F.l,D=z<0.5?z*(1+I):(z+I)-(I*z),y=z+z-D,E=D?((D-y)/D):0,A=~~B,H=B-A,x=D*E*H,G=y+x,w=D-x,C=A%6;return{r:[D,w,y,y,G,D][C],g:[G,D,D,w,y,y][C],b:[y,y,G,D,D,w][C]}}};function k(w,A){var x={},y=0,z=A/2;for(var B in w){y=w[B]%A;x[B]=w[B]+(y>z?A-y:-y)}return x}function i(x,w,y){return(a.max(x.r-w.r,w.r-x.r)+a.max(x.g-w.g,w.g-x.g)+a.max(x.b-w.b,w.b-x.b))*(y?255:1)/765}function d(y,A){var B=A?1:255,w=[y.r/B,y.g/B,y.b/B],x=b.options.luminance;for(var z=w.length;z--;){w[z]=w[z]<=0.03928?w[z]/12.92:a.pow(((w[z]+0.055)/1.055),2.4)}return((x.r*w[0])+(x.g*w[1])+(x.b*w[2]))}function v(D,x,C,w){var B={},E=(C!==h?C:1),A=(w!==h?w:1),z=E+A*(1-E);for(var y in D){B[y]=(D[y]*E+x[y]*A*(1-E))/z}B.a=z;return B}function n(x,w){var y=1;if(x>=w){y=(x+0.05)/(w+0.05)}else{y=(w+0.05)/(x+0.05)}return l(y*100)/100}function m(y,x,w){return(y>w?w:y<x?x:y)}return s}));